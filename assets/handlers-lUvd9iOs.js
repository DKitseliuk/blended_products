import{a as h,i as z}from"./vendor-Cbhu4xvy.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();const r={body:document.querySelector("body"),form:document.querySelector("form.search-form"),categories:document.querySelector("ul.categories"),productsList:document.querySelector("ul.products"),loadMoreButton:document.querySelector(".load-more-btn"),notFoundDiv:document.querySelector(".not-found"),modal:document.querySelector(".modal"),modalProduct:document.querySelector("div.modal-product"),modalCloseButton:document.querySelector(".modal__close-btn"),modalWishlistButton:document.querySelector(".modal-product__btn--wishlist"),modalCartButton:document.querySelector(".modal-product__btn--cart"),formClearButton:document.querySelector(".search-form__btn-clear"),cartProductsNumber:document.querySelector("span[data-cart-count]"),wishlistProductsNumber:document.querySelector("span[data-wishlist-count]"),cartProductsCount:document.querySelector("span[data-count]"),cartProductsPrice:document.querySelector("span[data-price]"),cartBuyProductsButton:document.querySelector("button.cart-summary__btn"),loader:document.querySelector("span.span-loader"),themeToggleButton:document.querySelector("button.theme-toggle-btn"),scrollTopButton:document.querySelector("button.scroll-top-btn"),header:document.querySelector("header.header")},X="https://dummyjson.com",C={PRODUCTS:"/products",PRODUCTS_BY_ID:"/products/",PRODUCTS_BY_SEARCH:"/products/search",CATEGORY:"/products/category/",CATEGORY_LIST:"/products/category-list"},p={ADD_TO_CART:"Add to Cart",REMOVE_FROM_CART:"Remove from Cart",ADD_TO_WISHLIST:"Add to Wishlist",REMOVE_FROM_WISHLIST:"Remove from Wishlist"},a={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},i={LIGHT:"light",DARK:"dark"},f=12;function Q(t){const e=JSON.parse(localStorage.getItem(a.CART))??[];e.push(t),localStorage.setItem(a.CART,JSON.stringify(e))}function Z(t){const e=JSON.parse(localStorage.getItem(a.CART)).filter(o=>o!==t);localStorage.setItem(a.CART,JSON.stringify(e))}function tt(t){return(JSON.parse(localStorage.getItem(a.CART))??[]).includes(t)}function W(){return(JSON.parse(localStorage.getItem(a.CART))??[]).length}function et(){return JSON.parse(localStorage.getItem(a.CART))??[]}function ot(t){const e=JSON.parse(localStorage.getItem(a.WISHLIST))??[];e.push(t),localStorage.setItem(a.WISHLIST,JSON.stringify(e))}function rt(t){const e=JSON.parse(localStorage.getItem(a.WISHLIST)).filter(o=>o!==t);localStorage.setItem(a.WISHLIST,JSON.stringify(e))}function nt(t){return(JSON.parse(localStorage.getItem(a.WISHLIST))??[]).includes(t)}function st(){return(JSON.parse(localStorage.getItem(a.WISHLIST))??[]).length}function ct(){return JSON.parse(localStorage.getItem(a.WISHLIST))??[]}function b(t){t===i.LIGHT?localStorage.setItem(a.THEME,i.LIGHT):localStorage.setItem(a.THEME,i.DARK)}function $(){return localStorage.getItem(a.THEME)??i.LIGHT}function at(t){const o=["all",...t].map(n=>`
            <li class="categories__item">
                <button class="categories__btn" type="button">${n}</button>
            </li>
        `).join("");r.categories.innerHTML=o}function y(t){const e=t.map(({id:o,thumbnail:n,title:s,brand:c="-",category:d,price:E})=>`
            <li class="products__item" data-id="${o}">
                <img class="products__image" src="${n}" alt="${s}"/>
                <p class="products__title">${s}</p>
                <p class="products__brand"><span class="products__brand--bold">Brand: </span>${c}</p>
                <p class="products__category">Category: ${d}</p>
                <p class="products__price">Price: $${E}</p>
            </li>
        `).join("");r.productsList.insertAdjacentHTML("beforeend",e)}function it({thumbnail:t,title:e,tags:o,description:n,shippingInformation:s,returnPolicy:c,price:d}){const E=o.map(V=>`
            <li class="modal-product__tags">${V}</li>
        `).join(""),j=`
        <img class="modal-product__img" src="${t}" alt="${e}" />
        <div class="modal-product__content">
            <p class="modal-product__title">${e}</p>
            <ul class="modal-product__tags">${E}</ul>
            <p class="modal-product__description">${n}</p>
            <p class="modal-product__shipping-information">Shipping: ${s}</p>
            <p class="modal-product__return-policy">Return Policy: ${c}</p>
            <p class="modal-product__price">Price: $${d}</p>
            <button class="modal-product__buy-btn" type="button">Buy</button>
        </div>
        `;r.modalProduct.innerHTML=j}function I(){r.productsList.innerHTML=""}function B(){r.loadMoreButton.classList.remove("is-hidden")}function O(){r.loadMoreButton.classList.add("is-hidden")}function L(){r.notFoundDiv.classList.add("not-found--visible")}function R(){r.notFoundDiv.classList.remove("not-found--visible")}function A(){r.wishlistProductsNumber.textContent=st()}function T(){r.cartProductsNumber.textContent=W()}function lt(){r.cartProductsCount.textContent=W()}function ut(t){const e=t.reduce((o,{price:n})=>o+n,0);r.cartProductsPrice.textContent=`$ ${e.toFixed(2)}`}function S(){r.loader.classList.add("loader")}function _(){r.loader.classList.remove("loader")}function dt(){r.scrollTopButton.classList.add("scroll-top-btn--visible")}function mt(){r.scrollTopButton.classList.remove("scroll-top-btn--visible")}function w(){$()===i.DARK?(b(i.DARK),r.body.setAttribute("data-theme",i.DARK)):(b(i.LIGHT),r.body.removeAttribute("data-theme"))}function pt(){$()===i.LIGHT?(b(i.DARK),r.body.setAttribute("data-theme",i.DARK)):(b(i.LIGHT),r.body.removeAttribute("data-theme"))}function q(t,e){t.forEach(o=>{o.classList.remove(e)})}function k(t,e){t.classList.add(e)}const Tt=new IntersectionObserver(t=>{t[0].isIntersecting?(r.scrollTopButton.removeEventListener("click",M),mt()):(dt(),r.scrollTopButton.addEventListener("click",M))});let g;function ft(t){g=t,r.modal.classList.add("modal--is-open"),nt(t)&&v(!0),tt(t)&&P(!0),document.body.style.overflow="hidden",window.addEventListener("keydown",F),r.modal.addEventListener("click",x),r.modalCloseButton.addEventListener("click",J),r.modalWishlistButton.addEventListener("click",G),r.modalCartButton.addEventListener("click",K)}function D(){g=null,r.modal.classList.remove("modal--is-open"),document.body.style.overflow="",v(!1),P(!1),window.location.pathname.includes("wishlist.html")&&yt(),window.location.pathname.includes("cart.html")&&St(),window.removeEventListener("keydown",F),r.modal.removeEventListener("click",x),r.modalCloseButton.removeEventListener("click",J),r.modalWishlistButton.removeEventListener("click",G),r.modalCartButton.removeEventListener("click",K)}function F(t){t.code==="Escape"&&D()}function x(t){t.target===r.modal&&D()}function J(){D()}function G(t){t.currentTarget.textContent.trim()===p.ADD_TO_WISHLIST?(ot(g),v(!0)):(rt(g),v(!1)),A()}function K(t){t.currentTarget.textContent.trim()===p.ADD_TO_CART?(Q(g),T(),P(!0)):(Z(g),T(),P(!1))}function P(t){t?r.modalCartButton.textContent=p.REMOVE_FROM_CART:r.modalCartButton.textContent=p.ADD_TO_CART}function v(t){t?r.modalWishlistButton.textContent=p.REMOVE_FROM_WISHLIST:r.modalWishlistButton.textContent=p.ADD_TO_WISHLIST}h.defaults.baseURL=X;async function gt(){const{data:t}=await h.get(`${C.CATEGORY_LIST}`);return t}async function N(t=1){const e=(t-1)*f,{data:o}=await h.get(`${C.PRODUCTS}`,{params:{skip:e,limit:f}});return o}async function U(t=1,e){const o=(t-1)*f,{data:n}=await h.get(`${C.CATEGORY}${e}`,{params:{skip:o,limit:f}});return n}async function H(t){const{data:e}=await h.get(`${C.PRODUCTS_BY_ID}${t}`);return e}async function Y(t=1,e){const o=(t-1)*f,{data:n}=await h.get(`${C.PRODUCTS_BY_SEARCH}`,{params:{skip:o,limit:f,q:e}});return n}let l,m,u;async function ht(){l=1,m="all",u=null,w(),r.form.reset(),A(),T(),S();try{const t=await gt();at(t);const e=document.querySelector(".categories__btn");k(e,"categories__btn--active");const{limit:o,skip:n,products:s,total:c}=await N(l);s.length?y(s):L(),o+n<c&&B()}catch(t){console.log(t.message)}finally{_()}}async function Ct(){l++,O(),S();try{const{limit:t,skip:e,products:o,total:n}=u?await Y(l,u):m==="all"?await N(l):await U(l,m);y(o),t+e<n&&B()}catch(t){console.log(t.message)}finally{_()}}async function It(t){if(t.target.nodeName!=="BUTTON")return;l=1,u=null,O(),R(),I();const e=document.querySelectorAll(".categories__btn");q(e,"categories__btn--active"),k(t.target,"categories__btn--active"),S();try{m=t.target.textContent;const{limit:o,skip:n,products:s,total:c}=m==="all"?await N(l):await U(l,m);s.length?y(s):L(),o+n<c&&B()}catch(o){console.log(o.message)}finally{_()}}async function Lt(t){const e=t.target.closest(".products__item");if(!e)return;const o=Number(e.dataset.id);try{const n=await H(o);it(n),ft(o)}catch(n){console.log(n.message)}}async function bt(t){if(t.preventDefault(),u=t.currentTarget.elements.searchValue.value.trim(),!u){u=null;return}l=1,m="all",O(),R(),I(),S();const e=document.querySelectorAll(".categories__btn");q(e,"categories__btn--active");try{const{limit:o,skip:n,products:s,total:c}=await Y(l,u);s.length?y(s):L(),o+n<c&&B()}catch(o){console.log(o.message)}finally{_()}}function Pt(){O(),R(),I(),ht()}async function yt(){w(),r.form.reset(),A(),T(),I(),S();const t=ct();try{const e=t.map(async n=>await H(n)),o=await Promise.all(e);o.length?y(o):L()}catch(e){console.log(e.message)}finally{_()}}async function St(){w(),r.form.reset(),A(),T(),I(),S();const t=et();try{const e=t.map(async n=>await H(n)),o=await Promise.all(e);lt(),ut(o),o.length?y(o):L()}catch(e){console.log(e.message)}finally{_()}}function vt(){z.success({message:"Products purchased successfully",position:"topRight"})}function Bt(){pt()}function M(){window.scrollTo({top:0,behavior:"smooth"})}export{Bt as a,M as b,ht as c,Ct as d,It as e,bt as f,Pt as g,Lt as h,yt as i,St as j,vt as k,Tt as o,r};
//# sourceMappingURL=handlers-lUvd9iOs.js.map
